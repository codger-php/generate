#!/usr/bin/php
<?php

namespace Codger\Generate;

$dir = getcwd();
require_once "$dir/vendor/autoload.php";

if (!isset($argv[1])) {
    fwrite(STDERR, <<<EOT

Pass at least one argument (the name of the recipe) to `vendor/bin/codger`.


EOT
    );
    exit(Runner::ERROR_NO_RECIPE);
}

if (!file_exists("$dir/recipes/{$argv[1]}/Recipe.php")) {
    fwrite(STDERR, <<<EOT

Recipe `{$argv[1]}` could not be found in `$dir/recipes`.

Make sure that:
- A folder exists called {$argv[1]};
- It contains at least a `Recipe.php`.


EOT
    );
    exit(Runner::ERROR_RECIPE_NOT_FOUND);
}

$runner = new Runner($argv[1]);
$runner->run(...Runner::arguments());

